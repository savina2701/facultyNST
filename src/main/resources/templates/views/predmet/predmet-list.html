<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Spring Boot App</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
	<link href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css" rel="stylesheet" /> <!--DataTable CSS-->
	<link href="/css/table.css" rel="stylesheet" />
</head>
<body>
	<!-- Fiksni header -->
	<header class="bg-dark shadow-sm py-2 px-4" style="position: fixed; top: 0; left: 0; width: 100%; z-index: 1040;">
	    <div class="d-flex justify-content-end">
	        <small class="text-muted">Jove Ilica 154, Beograd 11000</small>
	    </div>
	</header>

	<!-- Meni -->
	<div class="container-fluid mt-4">
        <div class="row">
            <!-- Levi meni -->
            <div class="col-2 bg-dark text-white" style="height: 100vh; position: fixed;">
                <h4 class="mt-3">Izbor</h4>
                <ul class="nav flex-column">
					<li th:each="item : ${menuItems}" class="nav-item">
					    <a class="nav-link text-white d-flex align-items-center" th:href="${item.url}">
					        <i th:class="${item.icon}" th:classappend="'me-2'"></i>
					        <span th:text="${item.label}"></span>
					    </a>
					</li>
                </ul>
            </div>

            <!-- Tabela -->
			<div class="container mt-5 main-content">
				<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
				    <h1 class="mb-0">Spisak predmeta</h1>
					<a th:href="@{/predmet/add}" class="btn btn-sm" style="background-color: #5bc0de; color: white; white-space: nowrap;">
						<i class="bi bi-plus-lg me-2"></i> Dodaj novi predmet
					</a>
				</div>
				
				<div class="card-body">
				<div class="table-responsive">
				    <table id="predmetTable" class="table table-striped table-hover table-bordered align-middle">
				        <thead>
				        <tr>
				            <th>ID</th>
				            <th>Naziv</th>
				            <th>ESPB</th>
				            <th>Godina studija</th>
				            <th>Semestar</th>
							<th>Opis</th>
				            <th>Obavezan</th>
				            <th>Katedra</th>
				        </tr>
				        </thead>
				        <tbody>
				        <tr th:each="predmet : ${predmeti}">
							<td>
							  <a th:href="@{${'/predmet/' + predmet.id}}" th:text="${predmet.id}"></a>
							</td>
				            <td th:text="${predmet.naziv}">Predmet</td>
				            <td th:text="${predmet.espb}">6</td>
				            <td th:text="${predmet.godinaStudija}">1</td>
				            <td th:text="${predmet.semestar}">1</td>
							<td th:text="${predmet.opis}">Opis</td>
				            <td th:text="${predmet.obavezan}">Da</td>
							<td>
							  <a th:href="@{'/katedra/' + ${predmet.katedraFk}}" th:text="${predmet.katedraNaziv}"></a>
							</td>
				        </tr>
				        </tbody>
				    </table>
				</div>
				</div>
					
			</div>
			
        </div>
    </div>
	
	<!-- Fixed Footer -->
	<footer class="text-center text-muted border-top pt-3"
	        style="background-color: #f8f9fa; position: fixed; bottom: 0; left: 16.6667%; width: 83.3333%; z-index: 1000;">
	    <p class="mb-2">&copy; 2025 Faculty of Organizational Sciences, University of Belgrade</p>
	</footer>


	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>
	<script>
		$(document).ready(function() {
		  const table = $('#predmetTable').DataTable({
		    dom:
		      "<'row mb-3'<'col-sm-6 d-flex align-items-center'<'search-wrapper'>><'col-sm-6 text-end'l>>" +
		      "<'row'<'col-12'tr>>" +
		      "<'row mt-3'<'col-sm-6'i><'col-sm-6 text-center'p>>",
		    language: {
		      search: "", // sakrijemo default labelu search-a, jer ćemo koristiti custom
		      lengthMenu: "Prikaži _MENU_ unosa po strani",
		      zeroRecords: "Nema rezultata",
		      info: "Strana _PAGE_ od _PAGES_",
		      infoEmpty: "Nema dostupnih podataka",
		      infoFiltered: "(filtrirano iz _MAX_ unosa)",
		      paginate: {
		        next: "Sledeća",
		        previous: "Prethodna"
		      }
		    },
		    pageLength: 10,
		    ordering: true,
		    order: [ [0, 'asc'] ],
		    initComplete: function() {
		      const api = this.api();
		      // ubaci custom search polje u div.search-wrapper
		      $('div.search-wrapper').html(`
		        <div class="input-group">
		          <span class="input-group-text"><i class="bi bi-search"></i></span>
		          <input type="search" class="form-control" placeholder="Pretraga..." aria-label="Search" />
		        </div>
		      `);
		      // poveži custom input sa DataTables search-om
		      $('div.search-wrapper input').on('keyup change', function() {
		        api.search(this.value).draw();
		      });
		    }
		  });
		});
	</script>
	
</body>
</html>
